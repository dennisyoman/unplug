<div id="module_wrapper" class="module_fillin">
  <div class="tabs">
    <span>任務一</span>
  </div>

  <div class="units-title wow bounceInRight"></div>

  <div class="sideTool">
    <div class="btn_answer"></div>
    <div class="btn_replay"></div>
    <div class="btn_discover"></div>
  </div>

  <div id="contents" class="contents">
    <!--任務一-->
    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>文生圖</b
            >：根據每台車在速度、喜愛度、價格和續航力上的表現，最好的給 4
            分，第二的給 3 分，依次減少分數。把這些分數填上吧！
          </p>
          <img src="./DATA/PT4/BOOK1/IMAGES/PT4-1-1-4-intro.png" />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="subject wow fadeIn" style="width: 300px">
        <div class="sensorArea">
          <span
            opt="ranking"
            class="sensor"
            row="1"
            style="width: 38px; height: 39px; top: 47px; left: 84px"
            ans="3"
          />
          <span
            opt="ranking"
            class="sensor"
            row="1"
            style="width: 38px; height: 39px; top: 47px; left: 123px"
            ans="3"
          />
          <span
            opt="ranking"
            class="sensor"
            row="1"
            style="width: 38px; height: 39px; top: 47px; left: 161px"
            ans="2"
          />
          <span
            opt="ranking"
            class="sensor"
            row="1"
            style="width: 38px; height: 39px; top: 47px; left: 199px"
            ans="4"
          />
          <span
            class="sensor"
            onclick="checkSum($(this),1)"
            style="width: 38px; height: 39px; top: 47px; left: 236px"
            ans=""
          />

          <!-- row2 -->
          <span
            opt="ranking"
            class="sensor"
            row="2"
            style="width: 38px; height: 39px; top: 94px; left: 84px"
            ans="2"
          />
          <span
            opt="ranking"
            class="sensor"
            row="2"
            style="width: 38px; height: 39px; top: 94px; left: 123px"
            ans="2"
          />
          <span
            opt="ranking"
            class="sensor"
            row="2"
            style="width: 38px; height: 39px; top: 94px; left: 161px"
            ans="3"
          />
          <span
            class="sensor"
            row="2"
            style="width: 38px; height: 39px; top: 94px; left: 199px"
            ans="3"
          />
          <span
            class="sensor"
            onclick="checkSum($(this),2)"
            style="width: 38px; height: 39px; top: 94px; left: 236px"
            ans=""
          />

          <!-- row3 -->
          <span
            opt="ranking"
            class="sensor"
            row="3"
            style="width: 38px; height: 39px; top: 141px; left: 84px"
            ans="4"
          />
          <span
            opt="ranking"
            class="sensor"
            row="3"
            style="width: 38px; height: 39px; top: 141px; left: 123px"
            ans="4"
          />
          <span
            opt="ranking"
            class="sensor"
            row="3"
            style="width: 38px; height: 39px; top: 141px; left: 161px"
            ans="1"
          />
          <span
            opt="ranking"
            class="sensor"
            row="3"
            style="width: 38px; height: 39px; top: 141px; left: 199px"
            ans="2"
          />
          <span
            class="sensor"
            onclick="checkSum($(this),3)"
            style="width: 38px; height: 39px; top: 141px; left: 236px"
            ans=""
          />

          <!-- row4 -->
          <span
            opt="ranking"
            class="sensor"
            row="4"
            style="width: 38px; height: 39px; top: 189px; left: 84px"
            ans="1"
          />
          <span
            opt="ranking"
            class="sensor"
            row="4"
            style="width: 38px; height: 39px; top: 189px; left: 123px"
            ans="4"
          />
          <span
            opt="ranking"
            class="sensor"
            row="4"
            style="width: 38px; height: 39px; top: 189px; left: 161px"
            ans="3"
          />
          <span
            opt="ranking"
            class="sensor"
            row="1"
            style="width: 38px; height: 39px; top: 189px; left: 199px"
            ans="1"
          />
          <span
            class="sensor"
            onclick="checkSum($(this),4)"
            style="width: 38px; height: 39px; top: 189px; left: 236px"
            ans=""
          />
        </div>

        <!-- subjects -->
        <img
          style="width: 100%; height: auto"
          src="./DATA/PT4/BOOK1/IMAGES/PT4-1-1-4-1.png"
        />
      </div>

      <div class="options ranking loop">
        <div class="option" fillin="1">
          <span class="fillin">1</span>
        </div>
        <div class="option" fillin="2">
          <span class="fillin">2</span>
        </div>
        <div class="option" fillin="3">
          <span class="fillin">3</span>
        </div>
        <div class="option" fillin="4">
          <span class="fillin">4</span>
        </div>
      </div>
    </div>
  </div>

  <div class="assetsPreload"></div>
</div>

<script>
  var checkSum = function (tar, rowID) {
    // 阻止原本的 click event
    if (tar && tar.length > 0) {
      tar.off("click");
    }

    // 找到同樣 rowID 的所有 sensor
    var sensors = $(`#module_wrapper .sensor[row="${rowID}"]`);

    // 把數字加起來
    var sum = 0;
    sensors.each(function () {
      var fillin = $(this).attr("fillin");
      if (fillin && fillin !== "") {
        var num = parseInt(fillin, 10);
        if (!isNaN(num)) {
          sum += num;
        }
      }
    });

    rootSoundEffect($help);
    tar.html(sum);
  };
</script>
