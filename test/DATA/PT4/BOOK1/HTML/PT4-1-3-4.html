<div id="module_wrapper" class="module_fillin">
  <div class="tabs">
    <span>任務一</span>
  </div>

  <div class="units-title wow bounceInRight"></div>

  <div class="sideTool">
    <div class="btn_answer"></div>
    <div class="btn_replay"></div>
    <div class="btn_discover" onClick="toggleAttachment('Graph', this)"></div>
  </div>

  <div id="contents" class="contents">
    <!--任務一-->
    <div>
      <div class="intro" style="display: none">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>文生圖</b
            >：遵照園長的壓縮規則，找出所有的排列法。(每一排一定要先按出最左邊的動物後，才可以點出其他2隻動物。)
          </p>
          <img src="./DATA/PT4/BOOK1/IMAGES/PT4-1-3-4-1-intro.png" />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div
        class="subject wow fadeIn tti"
        style="width: 280px; margin-top: 50px"
      >
        <div class="sensorArea">
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="1"
            style="width: 25px; height: 40px; top: 25px; left: 51px"
            ans="gorilla"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="1"
            style="width: 25px; height: 40px; top: 25px; left: 76px"
            ans="sheep"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="1"
            style="width: 25px; height: 40px; top: 25px; left: 101px"
            ans="rabbit"
          />

          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="2"
            style="width: 25px; height: 40px; top: 87px; left: 51px"
            ans="gorilla"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="2"
            style="width: 25px; height: 40px; top: 87px; left: 76px"
            ans="rabbit"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="2"
            style="width: 25px; height: 40px; top: 87px; left: 101px"
            ans="sheep"
          />

          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="3"
            style="width: 25px; height: 40px; top: 182px; left: 51px"
            ans="rabbit"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="3"
            style="width: 25px; height: 40px; top: 182px; left: 76px"
            ans="sheep"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="3"
            style="width: 25px; height: 40px; top: 182px; left: 101px"
            ans="gorilla"
          />

          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="4"
            style="width: 25px; height: 40px; top: 25px; left: 175px"
            ans="rabbit"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="4"
            style="width: 25px; height: 40px; top: 25px; left: 200px"
            ans="gorilla"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="4"
            style="width: 25px; height: 40px; top: 25px; left: 225px"
            ans="sheep"
          />

          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="5"
            style="width: 25px; height: 40px; top: 105px; left: 175px"
            ans="sheep"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="5"
            style="width: 25px; height: 40px; top: 105px; left: 200px"
            ans="gorilla"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="5"
            style="width: 25px; height: 40px; top: 105px; left: 225px"
            ans="rabbit"
          />

          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="6"
            style="width: 25px; height: 40px; top: 182px; left: 175px"
            ans="sheep"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="6"
            style="width: 25px; height: 40px; top: 182px; left: 200px"
            ans="rabbit"
          />
          <span
            onclick="selectOption($(this), event)"
            opt="animals"
            class="sensor"
            group="6"
            style="width: 25px; height: 40px; top: 182px; left: 225px"
            ans="gorilla"
          />
        </div>

        <!-- subjects -->
        <img
          style="width: 100%; height: auto"
          src="./DATA/PT4/BOOK1/IMAGES/PT4-1-3-4-1.png"
        />
      </div>

      <div class="options animals">
        <div class="option" fillin="gorilla">
          <span class="fillin"
            ><img src="./DATA/PT4/BOOK1/IMAGES/gorilla.png"
          /></span>
        </div>
        <div class="option" fillin="sheep">
          <span class="fillin"
            ><img src="./DATA/PT4/BOOK1/IMAGES/sheep.png"
          /></span>
        </div>
        <div class="option" fillin="rabbit">
          <span class="fillin"
            ><img src="./DATA/PT4/BOOK1/IMAGES/rabbit.png"
          /></span>
        </div>
      </div>
    </div>
  </div>

  <div class="assetsPreload"></div>
</div>

<script>
  var selectOption = function (tar, e) {
    $(".alert").remove();
    //
    var group = tar.attr("group");
    var firstOfGroup = $(`#module_wrapper .sensor[group="${group}"]`).eq(0);
    var isFirst = tar.is(firstOfGroup); // 判斷是否為同一個元素
    if (!firstOfGroup.attr("fillin") && !isFirst) {
      rootSoundEffect($stupid);
      var hinter = "請先選擇最左邊的格子";
      $(".contents > div.selected").append(
        `<div class="alert wow bounceInLeft" onClick="$(this).remove()">
          <p>${hinter}</p>
        </div>`,
      );

      // 停止同一元素上其他 click handler（例如 fillin.js 綁的 click）
      if (e) {
        e.preventDefault();
        e.stopImmediatePropagation();
      }
      return false;
    }
    var opt = tar.attr("opt");
    var ans = tar.attr("ans");
    var options = $(`#module_wrapper .options.${opt} .option[fillin="${ans}"]`);
    options.addClass("selected");
    options.siblings(".selected").removeClass("selected");
  };
</script>

<style>
  .sensorArea .sensor {
    border-bottom: 1px solid rgba(0 0 0 /0.3);
    transform: scale(0.9);
  }
  .sensorArea .sensor img {
    height: 100%;
    width: auto;
    animation: bounceIn 1s backwards;
    transform-origin: center bottom;
  }
</style>
