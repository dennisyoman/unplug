<div id="module_wrapper" class="module_basic">
  <div class="tabs">
    <span class="demo">示範</span>
    <span>任務一</span>
    <span>任務二</span>
    <!--<span>任務三</span>-->
  </div>

  <div class="units-title wow bounceInRight"></div>

  <div class="sideTool">
    <div class="btn_replay"></div>
  </div>

  <div id="contents" class="contents">
    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>高斯怎麼想：</b
            ><br />1.依順序點擊數字，分成兩兩一組進到分類框裡。<br />2.分類完成後判定框框答案。
          </p>
          <img
            width="400"
            src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item">
          <div class="digits">
            <span group="A" onclick="teamMe($(this))">1</span>+
            <span group="B" onclick="teamMe($(this))">2</span>+
            <span group="C" onclick="teamMe($(this))">3</span>+
            <span group="D" onclick="teamMe($(this))">4</span>+
            <span group="D" onclick="teamMe($(this))">5</span>+
            <span group="C" onclick="teamMe($(this))">6</span>+
            <span group="B" onclick="teamMe($(this))">7</span>+
            <span group="A" onclick="teamMe($(this))">8</span>=？
          </div>
          <div class="teams" prefix="+"></div>
          <div class="dashboard">
            <div class="sensors">
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 147px; width: 21px; height: 12px"
                >4</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 332px; width: 21px; height: 12px"
                >9</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 148px; width: 21px; height: 12px"
                >4</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 219px; width: 21px; height: 12px"
                >9</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 83px; left: 296px; width: 41px; height: 12px"
                >36</span
              >
            </div>
            <div class="img">
              <img width="400" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1.png" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>高斯怎麼想：</b
            ><br />1.依順序點擊數字，分成兩兩一組進到分類框裡。<br />2.分類完成後判定框框答案。
          </p>
          <img
            width="400"
            src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item">
          <div class="digits">
            <span group="A" onclick="teamMe($(this))">1</span>+
            <span group="B" onclick="teamMe($(this))">2</span>+
            <span group="C" onclick="teamMe($(this))">3</span>+
            <span group="D" onclick="teamMe($(this))">4</span>+
            <span group="E" onclick="teamMe($(this))">5</span>+
            <span group="F" onclick="teamMe($(this))">6</span>+
            <span group="F" onclick="teamMe($(this))">7</span>+
            <span group="E" onclick="teamMe($(this))">8</span>+
            <span group="D" onclick="teamMe($(this))">9</span>+
            <span group="C" onclick="teamMe($(this))">10</span>+
            <span group="B" onclick="teamMe($(this))">11</span>+
            <span group="A" onclick="teamMe($(this))">12</span>=？
          </div>
          <div class="teams" prefix="+"></div>
          <div class="dashboard">
            <div class="sensors">
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 147px; width: 21px; height: 12px"
                >6</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 332px; width: 21px; height: 12px"
                >13</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 148px; width: 21px; height: 12px"
                >6</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 219px; width: 21px; height: 12px"
                >13</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 83px; left: 296px; width: 41px; height: 12px"
                >78</span
              >
            </div>
            <div class="img">
              <img width="400" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1.png" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>高斯怎麼想：</b
            ><br />1.依順序點擊數字，分成兩兩一組進到分類框裡。<br />2.有沒有沒有分到組的數字？
          </p>
          <img
            width="400"
            src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item">
          <div class="digits">
            <span group="A" onclick="teamMe($(this))">1</span>+
            <span group="B" onclick="teamMe($(this))">2</span>+
            <span group="C" onclick="teamMe($(this))">3</span>+
            <span group="C" onclick="teamMe($(this))">4</span>+
            <span group="B" onclick="teamMe($(this))">5</span>+
            <span group="A" onclick="teamMe($(this))">6</span>+
            <span onclick="teamMe($(this))">7</span>=？
          </div>
          <div class="teams" prefix="+"></div>
          <div class="dashboard">
            <div class="sensors">
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 147px; width: 21px; height: 12px"
                >3</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 332px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 118px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 181px; width: 21px; height: 12px"
                >3</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 253px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 83px; left: 330px; width: 41px; height: 12px"
                >28</span
              >
            </div>
            <div class="img">
              <img width="400" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-0.png" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="assetsPreload"></div>
</div>

<style>
  .item {
    text-align: center;
  }
  .item > div {
    position: relative;
  }
  .item .digits {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    line-height: 14px;
    color: #000;
    gap: 3px;
    margin-bottom: 10px;
    animation: fadeInDown 0.6s;
  }
  .item .digits > span {
    line-height: 14px;
    text-align: center;
    width: 14px;
    height: 14px;
    pointer-events: auto;
    display: inline-block;
    cursor: pointer;
    font-weight: bold;
  }
  .item .digits > span.selected {
    opacity: 0.3;
    pointer-events: none;
  }
  .item .teams {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    margin-bottom: 10px;
    width: 450px;
  }
  .item .teams > div {
    width: 100%;
    font-size: 14px;
    font-weight: bold;
    color: #000;
    border: 2px solid #fff;
    background: #fff;
    display: grid;
    place-items: center;
    height: 40px;
    border-radius: 4px;
    animation: bounceIn 1s;
  }
  .item .teams > div:nth-child(4n + 1).selected {
    border-color: #f6a81a;
  }
  .item .teams > div:nth-child(4n + 2).selected {
    border-color: #49b570;
  }
  .item .teams > div:nth-child(4n + 3).selected {
    border-color: #37a7e0;
  }
  .item .teams > div:nth-child(4n + 4).selected {
    border-color: #ea5e88;
  }
  .item .dashboard.showAnswer {
    display: inline-block;
  }
  .item .dashboard {
    animation: fadeInUp 0.6s;
    display: none;
    width: auto;
    margin: 0 auto;
  }
</style>
<script>
  var teamMe = function (tar) {
    var group = tar.attr("group");
    if (group) {
      var prefix = $(
        ".contents > div.selected .group .item.selected .teams"
      ).attr("prefix")
        ? $(".contents > div.selected .group .item.selected .teams").attr(
            "prefix"
          )
        : ",";
      var availableTeam = $(
        ".contents > div.selected .group .item.selected .teams > div:not(.selected)"
      ).eq(0);
      if (availableTeam.attr("group")) {
        if (group == availableTeam.attr("group")) {
          //已經有東西了
          availableTeam.addClass("selected");
          tar.addClass("selected");
          availableTeam.append(prefix + tar.html());
          rootSoundEffect($right);
        } else {
          rootSoundEffect($wrong);
        }
      } else {
        //還是空的
        availableTeam.attr("group", group);
        tar.addClass("selected");
        availableTeam.append(tar.html());
        rootSoundEffect($click);
      }
      //確認是否點完了
      if (
        $(
          ".contents > div.selected .group .item.selected .teams > div:not(.selected)"
        ).length < 1
      ) {
        rootSoundEffect($chimes);
        tar.parent().siblings(".dashboard").addClass("showAnswer");
      }
    } else {
      rootSoundEffect($wrong);
    }
    $(".sideTool > div.btn_answer").removeClass("active");
    $(".sideTool > div.btn_replay").show();
  };

  var withinResetElem = function () {
    //重置teams
    var teams = $(".contents > div.selected .group .item.selected .teams");
    teams.empty();
    var digits = $(
      ".contents > div.selected .group .item.selected .digits > span"
    );
    for (var k = 0; k < Math.floor(digits.length / 2); k++) {
      teams.append("<div></div>");
    }
  };
</script>
