<div id="module_wrapper" class="module_basic">
  <div class="tabs">
    <span class="demo">示範</span>
    <span>任務一</span>
    <span>任務二</span>
    <span>任務三</span>
  </div>

  <div class="units-title wow bounceInRight"></div>

  <div class="sideTool">
    <div class="btn_replay"></div>
  </div>

  <div id="contents" class="contents">
    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>高斯怎麼想：</b
            ><br />1.依順序點擊數字，分成兩兩一組進到分類框裡。<br />2.分類完成後判定框框答案。
          </p>
          <img
            width="400"
            src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item">
          <div class="digits">
            <span group="A" onclick="teamMe($(this))">1</span>+
            <span group="B" onclick="teamMe($(this))">2</span>+
            <span group="C" onclick="teamMe($(this))">3</span>+
            <span group="D" onclick="teamMe($(this))">4</span>+
            <span group="D" onclick="teamMe($(this))">5</span>+
            <span group="C" onclick="teamMe($(this))">6</span>+
            <span group="B" onclick="teamMe($(this))">7</span>+
            <span group="A" onclick="teamMe($(this))">8</span>=？
          </div>
          <div class="teams" prefix="+"></div>
          <div class="dashboard">
            <div class="sensors">
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 147px; width: 21px; height: 12px"
                >4</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 332px; width: 21px; height: 12px"
                >9</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 148px; width: 21px; height: 12px"
                >4</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 219px; width: 21px; height: 12px"
                >9</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 83px; left: 296px; width: 41px; height: 12px"
                >36</span
              >
            </div>
            <div class="img">
              <img width="400" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1.png" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>高斯怎麼想：</b
            ><br />1.依順序點擊數字，分成兩兩一組進到分類框裡。<br />2.分類完成後判定框框答案。
          </p>
          <img
            width="400"
            src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item">
          <div class="digits">
            <span group="A" onclick="teamMe($(this))">1</span>+
            <span group="B" onclick="teamMe($(this))">2</span>+
            <span group="C" onclick="teamMe($(this))">3</span>+
            <span group="D" onclick="teamMe($(this))">4</span>+
            <span group="E" onclick="teamMe($(this))">5</span>+
            <span group="F" onclick="teamMe($(this))">6</span>+
            <span group="F" onclick="teamMe($(this))">7</span>+
            <span group="E" onclick="teamMe($(this))">8</span>+
            <span group="D" onclick="teamMe($(this))">9</span>+
            <span group="C" onclick="teamMe($(this))">10</span>+
            <span group="B" onclick="teamMe($(this))">11</span>+
            <span group="A" onclick="teamMe($(this))">12</span>=？
          </div>
          <div class="teams" prefix="+"></div>
          <div class="dashboard">
            <div class="sensors">
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 147px; width: 21px; height: 12px"
                >6</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 332px; width: 21px; height: 12px"
                >13</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 148px; width: 21px; height: 12px"
                >6</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 219px; width: 21px; height: 12px"
                >13</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 83px; left: 296px; width: 41px; height: 12px"
                >78</span
              >
            </div>
            <div class="img">
              <img width="400" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1.png" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>高斯怎麼想：</b
            ><br />1.依順序點擊數字，分成兩兩一組進到分類框裡。<br />2.有沒有沒有分到組的數字？
          </p>
          <img
            width="400"
            src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-1-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item">
          <div class="digits">
            <span group="A" onclick="teamMe($(this))">1</span>+
            <span group="B" onclick="teamMe($(this))">2</span>+
            <span group="C" onclick="teamMe($(this))">3</span>+
            <span group="C" onclick="teamMe($(this))">4</span>+
            <span group="B" onclick="teamMe($(this))">5</span>+
            <span group="A" onclick="teamMe($(this))">6</span>+
            <span onclick="teamMe($(this))">7</span>=？
          </div>
          <div class="teams" prefix="+"></div>
          <div class="dashboard">
            <div class="sensors">
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 147px; width: 21px; height: 12px"
                >3</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 36px; left: 332px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 118px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 181px; width: 21px; height: 12px"
                >3</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 85px; left: 253px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word"
                style="top: 83px; left: 330px; width: 41px; height: 12px"
                >28</span
              >
            </div>
            <div class="img">
              <img width="400" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-0.png" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>高斯怎麼想：</b
            ><br />1.點擊對應的數字填入空格裡。<br />2.觀察圖示，計算正確的答案。
          </p>
          <img src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-2-intro.png" />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item">
          <div class="candies">
            <div class="options">
              <span
                group="1"
                class="word"
                onclick="fillMe($(this))"
                style="top: 10px; left: 27px; width: 15px; height: 15px"
              ></span>
              <span
                group="2"
                class="word"
                onclick="fillMe($(this))"
                style="top: 10px; left: 57px; width: 15px; height: 15px"
              ></span>
              <span
                group="3"
                class="word"
                onclick="fillMe($(this))"
                style="top: 10px; left: 87px; width: 15px; height: 15px"
              ></span>
              <span
                group="4"
                class="word"
                onclick="fillMe($(this))"
                style="top: 10px; left: 118px; width: 15px; height: 15px"
              ></span>
              <span
                group="5"
                class="word"
                onclick="fillMe($(this))"
                style="top: 10px; left: 149px; width: 15px; height: 15px"
              ></span>
              <span
                group="6"
                class="word"
                onclick="fillMe($(this))"
                style="top: 10px; left: 179px; width: 15px; height: 15px"
              ></span>
              <span
                group="7"
                class="word"
                onclick="fillMe($(this))"
                style="top: 10px; left: 209px; width: 15px; height: 15px"
              ></span>
            </div>
            <div class="sensors">
              <span
                group="7"
                onclick="selectMe($(this))"
                class="filling"
                style="top: 63px; left: 27px; width: 15px; height: 15px"
                >7</span
              >
              <span
                group="6"
                onclick="selectMe($(this))"
                class="filling"
                style="top: 63px; left: 57px; width: 15px; height: 15px"
                >6</span
              >
              <span
                group="5"
                onclick="selectMe($(this))"
                class="filling"
                style="top: 63px; left: 87px; width: 15px; height: 15px"
                >5</span
              >
              <span
                group="4"
                onclick="selectMe($(this))"
                class="filling"
                style="top: 63px; left: 118px; width: 15px; height: 15px"
                >4</span
              >
              <span
                group="3"
                onclick="selectMe($(this))"
                class="filling"
                style="top: 63px; left: 149px; width: 15px; height: 15px"
                >3</span
              >
              <span
                group="2"
                onclick="selectMe($(this))"
                class="filling"
                style="top: 63px; left: 179px; width: 15px; height: 15px"
                >2</span
              >
              <span
                group="1"
                onclick="selectMe($(this))"
                class="filling"
                style="top: 63px; left: 209px; width: 15px; height: 15px"
                >1</span
              >
            </div>
            <div class="img">
              <img width="250" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-2.png" />
            </div>
          </div>
          <div class="dashboard">
            <div class="sensors">
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word selected"
                style="top: 27px; left: 166px; width: 21px; height: 12px"
                >8</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word selected"
                style="top: 27px; left: 232px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word selected"
                style="top: 83px; left: 110px; width: 21px; height: 12px"
                >8</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word selected"
                style="top: 83px; left: 176px; width: 21px; height: 12px"
                >7</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word selected"
                style="top: 83px; left: 254px; width: 21px; height: 12px"
                >2</span
              >
              <span
                onclick="toggleMeClass($(this),'selected')"
                class="word selected"
                style="top: 80px; left: 341px; width: 41px; height: 12px"
                >28</span
              >
            </div>
            <div class="img">
              <img width="400" src="./DATA/PT2/BOOK4/IMAGES/PT2-4-3-3-4.png" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="assetsPreload"></div>
</div>

<style>
  .item {
    text-align: center;
  }
  .item > div {
    position: relative;
  }
  .item .digits {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    line-height: 14px;
    color: #000;
    gap: 3px;
    margin-bottom: 10px;
    animation: fadeInDown 0.6s;
  }
  .item .digits > span {
    line-height: 14px;
    text-align: center;
    width: 14px;
    height: 14px;
    pointer-events: auto;
    display: inline-block;
    cursor: pointer;
    font-weight: bold;
  }
  .item .digits > span.selected {
    opacity: 0.3;
    pointer-events: none;
  }
  .item .teams {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    margin-bottom: 10px;
    width: 450px;
  }
  .item .teams > div {
    width: 100%;
    font-size: 14px;
    font-weight: bold;
    color: #000;
    border: 2px solid #fff;
    background: #fff;
    display: grid;
    place-items: center;
    height: 40px;
    border-radius: 4px;
    animation: bounceIn 1s;
  }
  .item .teams > div:nth-child(4n + 1).selected {
    border-color: #f6a81a;
  }
  .item .teams > div:nth-child(4n + 2).selected {
    border-color: #49b570;
  }
  .item .teams > div:nth-child(4n + 3).selected {
    border-color: #37a7e0;
  }
  .item .teams > div:nth-child(4n + 4).selected {
    border-color: #ea5e88;
  }
  .item .dashboard.showAnswer {
    display: inline-block;
  }
  .item .dashboard {
    animation: fadeInUp 0.6s;
    display: none;
    width: auto;
    margin: 0 auto;
  }
  .item .candies {
    animation: fadeInDown 0.6s;
    display: inline-block;
    margin-bottom: 10px;
  }
  .item .candies .options {
    position: absolute;
    z-index: 2;
  }
  .item .candies .options span {
    position: absolute;
    pointer-events: auto;
    cursor: pointer;
    background: #fff;
    opacity: 0;
    z-index: 2;
  }
  .item .candies .options span:hover {
    opacity: 0.3;
  }
</style>
<script>
  //示範,任務一,二
  var teamMe = function (tar) {
    var group = tar.attr("group");
    if (group) {
      var prefix = $(
        ".contents > div.selected .group .item.selected .teams"
      ).attr("prefix")
        ? $(".contents > div.selected .group .item.selected .teams").attr(
            "prefix"
          )
        : ",";
      var availableTeam = $(
        ".contents > div.selected .group .item.selected .teams > div:not(.selected)"
      ).eq(0);
      if (availableTeam.attr("group")) {
        if (group == availableTeam.attr("group")) {
          //已經有東西了
          availableTeam.addClass("selected");
          tar.addClass("selected");
          availableTeam.append(prefix + tar.html());
          rootSoundEffect($right);
        } else {
          rootSoundEffect($wrong);
        }
      } else {
        //還是空的
        availableTeam.attr("group", group);
        tar.addClass("selected");
        availableTeam.append(tar.html());
        rootSoundEffect($click);
      }
      //確認是否點完了
      if (
        $(
          ".contents > div.selected .group .item.selected .teams > div:not(.selected)"
        ).length < 1
      ) {
        rootSoundEffect($chimes);
        tar.parent().siblings(".dashboard").addClass("showAnswer");
      }
    } else {
      rootSoundEffect($wrong);
    }
    $(".sideTool > div.btn_answer").removeClass("active");
    $(".sideTool > div.btn_replay").show();
  };
  //任務三
  var selectMe = function (tar) {
    tar.addClass("selected").siblings(".selected").removeClass("selected");
    rootSoundEffect($key);
  };
  //任務三
  var fillMe = function (tar) {
    var sensorSelected = tar
      .parent()
      .siblings(".sensors")
      .find(" .filling.selected");
    if (sensorSelected.length > 0) {
      if (sensorSelected.attr("group") == tar.attr("group")) {
        sensorSelected.addClass("showAnswer");
        rootSoundEffect($pop);
      } else {
        rootSoundEffect($stupid);
      }
    } else {
      rootSoundEffect($stupid);
    }
    //確認是否全部完成
    var sensors = tar.parent().siblings(".sensors").find(" > span");
    if (
      tar.parent().siblings(".sensors").find(" .filling").length ==
      tar.parent().siblings(".sensors").find(" .filling.showAnswer").length
    ) {
      rootSoundEffect($chimes);
      tar.parent().parent().siblings(".dashboard").addClass("showAnswer");
    }
    //
    $(".sideTool > div.btn_replay").show();
  };

  var withinResetElem = function () {
    //重置teams(示範,任務一,二)
    var teams = $(".contents > div.selected .group .item.selected .teams");
    teams.empty();
    var digits = $(
      ".contents > div.selected .group .item.selected .digits > span"
    );
    for (var k = 0; k < Math.floor(digits.length / 2); k++) {
      teams.append("<div></div>");
    }
    //任務三
    $(".contents > div.selected .group .item.selected .filling").eq(0).click();
  };
</script>
