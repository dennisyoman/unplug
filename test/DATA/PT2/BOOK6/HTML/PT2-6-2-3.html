<div id="module_wrapper" class="module_basic">
  <div class="tabs">
    <span class="demo">示範一</span>
    <span class="demo">示範二</span>
    <span
      onClick="event.stopPropagation();loadContainerInside('PT2/BOOK6/HTML/PT2-6-2-3-2.html','JS/decode.js',2)"
      >任務一</span
    >
  </div>

  <div class="units-title wow bounceInRight"></div>

  <div class="sideTool">
    <div class="btn_replay"></div>
    <div class="btn_check"></div>
  </div>

  <div id="contents" class="contents">
    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>主題與關鍵：</b
            ><br />快速讀過三遍，圈出文章中的關鍵字，並回答下列問題。
          </p>
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item" style="margin-top: 20px">
          <div class="questions wow fadeInLeft">
            <div class="sensors choose">
              <span
                onclick="chooseMe($(this))"
                group="q1"
                style="top: 20px; left: 17px; width: 43px; height: 16px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                group="q1"
                style="top: 20px; left: 78px; width: 43px; height: 16px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                group="q1"
                ans="1"
                style="top: 20px; left: 140px; width: 39px; height: 16px"
              ></span>
              <span
                onclick="verifyMe($(this))"
                class="verifyBtn"
                group="q1"
                style="top: 9px; left: -25px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                group="q2"
                style="top: 74px; left: 10px; width: 40px; height: 19px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                ans="1"
                group="q2"
                style="top: 74px; left: 57px; width: 40px; height: 19px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                ans="1"
                group="q2"
                style="top: 74px; left: 103px; width: 40px; height: 19px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                group="q2"
                style="top: 74px; left: 150px; width: 40px; height: 19px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                ans="1"
                group="q2"
                style="top: 74px; left: 197px; width: 40px; height: 19px"
              ></span>
              <span
                onclick="verifyMe($(this))"
                class="verifyBtn"
                group="q2"
                style="top: 67px; left: -25px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                group="q3"
                style="top: 141px; left: 10px; width: 31px; height: 19px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                ans="1"
                group="q3"
                style="top: 141px; left: 55px; width: 31px; height: 19px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                group="q3"
                style="top: 141px; left: 101px; width: 31px; height: 19px"
              ></span>
              <span
                onclick="verifyMe($(this))"
                class="verifyBtn"
                group="q3"
                style="top: 135px; left: -25px"
              ></span>
            </div>
            <img width="250" src="./DATA/PT2/BOOK6/IMAGES/PT2-6-2-3-1-1.png" />
          </div>
          <div class="refs wow fadeInRight">
            <div class="sensors circle">
              <span
                onclick="circleMe($(this))"
                style="top: 29px; left: 32px; width: 25px; height: 15px"
              ></span>
              <span
                onclick="circleMe($(this))"
                style="top: 29px; left: 163px; width: 25px; height: 15px"
              ></span>
              <span
                onclick="circleMe($(this))"
                style="top: 29px; left: 207px; width: 25px; height: 15px"
              ></span>
              <span
                onclick="circleMe($(this))"
                style="top: 41px; left: 54px; width: 39px; height: 15px"
              ></span>
              <span
                onclick="circleMe($(this))"
                style="top: 41px; left: 130px; width: 22px; height: 15px"
              ></span>
            </div>
            <div class="sensors">
              <span
                class="word"
                group="q1"
                style="
                  top: 4px;
                  left: 68px;
                  width: 109px;
                  height: 15px;
                  color: #00a3df;
                  font-weight: bold;
                "
                >Toys On Sale</span
              >
              <span
                class="word"
                group="q2"
                style="top: 164px; left: 8px; width: 109px; height: 15px"
                >Dolls</span
              >
              <span
                class="word"
                group="q2"
                style="top: 192px; left: 8px; width: 109px; height: 15px"
                >Puzzles</span
              >
              <span
                class="word"
                group="q2"
                style="top: 220px; left: 8px; width: 109px; height: 15px"
                >Cars</span
              >
              <span
                class="word"
                group="q3"
                style="top: 192px; left: 132px; width: 109px; height: 15px"
                >10</span
              >
            </div>
            <img width="250" src="./DATA/PT2/BOOK6/IMAGES/PT2-6-2-3-1-2.png" />
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p><b>主題與關鍵：</b><br />依照下方的敘述，回答問題。</p>
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item" style="margin-top: 20px">
          <div class="wow fadeInUp">
            <div class="sensors switcher">
              <span
                onclick="switchMe($(this))"
                options="A.Skimming^B.Scanning"
                option="0"
                ans="0"
                class="word"
                style="top: 185px; left: 102px; width: 70px; height: 13px"
              ></span>
              <span
                onclick="switchMe($(this))"
                options="A.Skimming^B.Scanning"
                option="0"
                ans="1"
                class="word"
                style="top: 222px; left: 102px; width: 70px; height: 13px"
              ></span>
            </div>
            <img width="320" src="./DATA/PT2/BOOK6/IMAGES/PT2-6-2-3-1-3.png" />
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="assetsPreload"></div>
</div>

<style>
  .item {
    text-align: center;
  }
  .item .refs {
    display: inline-block;
    position: relative;
    margin: 0 5px;
  }
  .item .sensors span {
    font-size: 12px;
    line-height: 1.15;
  }
  .item .sensors.circle span.selected {
    border: 2px solid #ff0000;
    border-radius: 100%;
  }
  .item .questions {
    display: inline-block;
    position: relative;
    margin: 0 5px;
  }
  .item .sensors.choose span.selected {
    border: 2px solid #ff0000;
    border-radius: 5px;
  }
  .item .sensors span.wrong::after {
    content: "";
    position: absolute;
    z-index: 99;
    width: 14px;
    height: 14px;
    top: calc(50% - 7px);
    left: calc(50% - 7px);
    background: url("./DATA/IMAGES/common/icon_wrong.png") no-repeat center
      center;
    background-size: contain;
    animation: bounceIn 1s both;
  }

  .item .verifyBtn {
    width: 20px;
    height: 20px;
    background: url("./DATA/IMAGES/common/btn_check.png") no-repeat center
      center;
    background-size: contain;
    animation: bounceIn 1s both;
  }
  .item .verifyBtn.selected {
    display: block;
  }
</style>
<script>
  var switchMe = function (tar) {
    var options = tar.attr("options").split("^");
    var option = parseInt(tar.attr("option"));
    option += 1;
    if (option >= options.length) {
      option = 0;
    }
    tar
      .removeClass("wrong")
      .addClass("selected")
      .attr("option", option)
      .html(options[option]);
    rootSoundEffect($pop);
    //是否都答了
    if (tar.siblings(":not(.selected)").length == 0) {
      $(".sideTool > div.btn_check").show();
    }
  };

  var circleMe = function (tar) {
    tar.addClass("selected");
    rootSoundEffect($pop);
    $(".sideTool > div.btn_replay").show();
  };
  var chooseMe = function (tar) {
    tar.removeClass("wrong").toggleClass("selected");
    rootSoundEffect($key);

    $(".sideTool > div.btn_replay").show();
  };
  var verifyMe = function (tar) {
    var gid = tar.attr("group");
    var folks = tar.siblings(`[group = "${gid}"]`);
    //
    var gotWrong = false;
    folks.each(function () {
      if ($(this).attr("ans") && !$(this).hasClass("selected")) {
        gotWrong = true;
      } else if (!$(this).attr("ans") && $(this).hasClass("selected")) {
        $(this).addClass("wrong");
        gotWrong = true;
      }
    });

    if (gotWrong) {
      rootSoundEffect($stupid);
    } else {
      var item = $(".contents > div.selected .group .item.selected");
      item.find(`.word[group=${gid}]`).addClass("selected");
      rootSoundEffect($right);
    }
  };

  var withinResetElem = function () {
    var item = $(".contents > div.selected .group .item.selected");
    item.find(".wrong").removeClass("wrong");
  };

  var withinCheckAnswer = function () {
    var item = $(".contents > div.selected .group .item.selected");
    item.find(".wrong").removeClass("wrong");
    //有switchers
    if (item.find(".switcher").length > 0) {
      var switcher = item.find(".switcher").find("span");
      var gotWrong = false;
      switcher.each(function () {
        if ($(this).attr("ans") != $(this).attr("option")) {
          $(this).addClass("wrong");
          gotWrong = true;
        }
      });

      if (gotWrong) {
        rootSoundEffect($stupid);
      } else {
        bingo();
      }
    }
  };
</script>
