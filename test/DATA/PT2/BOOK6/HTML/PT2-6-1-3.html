<div id="module_wrapper" class="module_basic">
  <div class="tabs">
    <span class="demo">示範</span>
    <span>任務一</span>
  </div>

  <div class="units-title wow bounceInRight"></div>

  <div class="sideTool">
    <div class="btn_replay"></div>
    <div class="btn_check"></div>
  </div>

  <div id="contents" class="contents">
    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>廣告小寫手：</b
            ><br />一步一步依照步驟說明，為游泳圈打造吸引人的廣告台詞。
          </p>
          <img
            width="100"
            src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-1-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item" style="margin-top: 20px">
          <div class="bigPicture">
            <div class="sensors">
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="A"
                placeholder="游泳圈曾經被割破"
                style="top: 30px; left: 18px; width: 80px; height: 30px"
              ></span>
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="B"
                style="top: 85px; left: 18px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="C"
                style="top: 30px; left: 182px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="D"
                style="top: 85px; left: 182px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                placeholder="用刀子也刺不破"
                oid="E"
                style="top: 30px; left: 303px; width: 80px; height: 30px"
              ></span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                oid="F"
                style="top: 85px; left: 303px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                oid="G"
                style="top: 30px; left: 467px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                oid="H"
                style="top: 85px; left: 467px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
            </div>
            <img width="550" src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-1-1.png" />
          </div>
          <div class="counter">
            <div class="sensors">
              <span
                onclick="cleanMe($(this))"
                group="g1"
                style="top: 5px; left: 168px; width: 80px; height: 30px"
              ></span>
              <span
                onclick="cleanMe($(this))"
                group="g2"
                style="top: 5px; left: 334px; width: 80px; height: 30px"
              ></span>
            </div>
            <img width="310" src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-1-2.png" />
          </div>
          <div class="dashboard">
            <div class="spaces">
              <span
                group="g1"
                style="top: 90px; left: 2px; width: 16px; height: 16px"
              ></span>
              <span
                group="g2"
                style="top: 90px; left: 32px; width: 16px; height: 16px"
              ></span>
              <span
                group="g3"
                style="top: 33px; left: 439px; width: 50px; height: 12px"
              ></span>
            </div>
            <div class="sensors">
              <span
                onclick="chooseMe($(this))"
                text="五顏六色"
                style="top: 48px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="溫柔體貼"
                style="top: 61px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="銅牆鐵壁"
                style="top: 74px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="五花八門"
                style="top: 88px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="變化自如"
                style="top: 101px; left: 310px; width: 50px; height: 12px"
              ></span>
            </div>
            <div
              class="sentense1"
              style="top: 90px; left: 73px; width: 174px; height: 45px"
            >
              <textarea maxlength="40"></textarea>
            </div>
            <div
              class="sentense2"
              style="top: 79px; left: 446px; width: 88px; height: 45px"
            >
              <textarea maxlength="20"></textarea>
            </div>
            <div class="img">
              <img
                width="550"
                src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-1-3.png"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="intro">
        <div>
          <h3>How to play?</h3>
          <p>
            <b>廣告小寫手：</b
            ><br />一步一步依照步驟說明，為腳踏車打造吸引人的廣告台詞。
          </p>
          <img
            width="100"
            src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-2-intro.png"
          />
          <span class="cta" onClick="switchIntro()">START</span>
        </div>
      </div>
      <div class="group">
        <div class="item" style="margin-top: 20px">
          <div class="bigPicture">
            <div class="sensors">
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="A"
                style="top: 30px; left: 18px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="B"
                style="top: 85px; left: 18px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="C"
                style="top: 30px; left: 182px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g1"
                oid="D"
                style="top: 85px; left: 182px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                oid="E"
                style="top: 30px; left: 303px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                oid="F"
                style="top: 85px; left: 303px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                oid="G"
                style="top: 30px; left: 467px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
              <span
                onclick="pickMe($(this))"
                gid="g2"
                oid="H"
                style="top: 85px; left: 467px; width: 80px; height: 30px"
              >
                <textarea maxlength="10"></textarea>
              </span>
            </div>
            <img width="550" src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-2-1.png" />
          </div>
          <div class="counter">
            <div class="sensors">
              <span
                onclick="cleanMe($(this))"
                group="g1"
                style="top: 5px; left: 168px; width: 80px; height: 30px"
              ></span>
              <span
                onclick="cleanMe($(this))"
                group="g2"
                style="top: 5px; left: 334px; width: 80px; height: 30px"
              ></span>
            </div>
            <img width="310" src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-2-2.png" />
          </div>
          <div class="dashboard">
            <div class="spaces">
              <span
                group="g1"
                style="top: 46px; left: 2px; width: 16px; height: 16px"
              ></span>
              <span
                group="g2"
                style="top: 46px; left: 32px; width: 16px; height: 16px"
              ></span>
              <span
                group="g1"
                style="top: 90px; left: 2px; width: 16px; height: 16px"
              ></span>
              <span
                group="g2"
                style="top: 90px; left: 32px; width: 16px; height: 16px"
              ></span>
              <span
                group="g3"
                style="top: 33px; left: 439px; width: 50px; height: 12px"
              ></span>
            </div>
            <div class="sensors">
              <span
                onclick="chooseMe($(this))"
                text="穿梭自如"
                style="top: 48px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="輕巧便捷"
                style="top: 61px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="平易近人"
                style="top: 74px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="努力不懈"
                style="top: 88px; left: 310px; width: 50px; height: 12px"
              ></span>
              <span
                onclick="chooseMe($(this))"
                text="別具匠心"
                style="top: 101px; left: 310px; width: 50px; height: 12px"
              ></span>
            </div>
            <div
              class="sentense1"
              style="top: 45px; left: 73px; width: 174px; height: 45px"
            >
              <textarea maxlength="40"></textarea>
            </div>
            <div
              class="sentense1"
              style="top: 90px; left: 73px; width: 174px; height: 45px"
            >
              <textarea maxlength="40"></textarea>
            </div>
            <div
              class="sentense2"
              style="top: 79px; left: 446px; width: 88px; height: 45px"
            >
              <textarea maxlength="20"></textarea>
            </div>
            <div class="img">
              <img
                width="550"
                src="./DATA/PT2/BOOK6/IMAGES/PT2-6-1-3-2-3.png"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="assetsPreload"></div>
</div>

<style>
  .item textarea {
    appearance: none;
    outline: none;
    padding: 0;
    margin: 0;
    font-size: 12px;
    line-height: 1;
    width: 100%;
    height: 100%;
    pointer-events: auto;
    text-align: center;
    border: none;
    resize: none;
    background: rgba(255, 255, 255, 0.1);
  }
  .item {
    text-align: center;
  }
  .item > div {
    position: relative;
  }
  .item > div.bigPicture {
    margin: 0 auto;
    margin-bottom: 20px;
    animation: fadeInDown 0.6s;
    pointer-events: auto;
  }
  .item > div.bigPicture.showAnswer {
    display: none;
  }
  .item > div.bigPicture .sensors > span {
    border: 2px solid transparent;
    border-radius: 5px;
  }
  .item > div.bigPicture .sensors > span.selected {
    border-color: #ff0000;
  }
  .item > div.counter {
    margin: 0 auto;
    margin-bottom: 20px;
    animation: fadeInUp 0.6s;
  }
  .item > div.counter .sensors > span {
    display: grid;
    place-content: center;
    font-size: 12px;
    line-height: 1.2;
  }

  .item.selected > div.dashboard.showAnswer {
    display: inline-block;
  }
  .item > div.dashboard {
    animation: fadeInUp 0.6s;
    display: none;
    width: auto;
    margin: 0 auto;
  }

  .item > div.dashboard .sensors > span {
    display: grid;
    place-content: center;
    font-size: 12px;
    line-height: 1.2;
  }
  .item > div.dashboard .sensors > span.wrong::after {
    content: "";
    position: absolute;
    z-index: 99;
    width: 30px;
    height: 30px;
    top: calc(50% - 15px);
    left: calc(50% - 15px);
    background: url("./DATA/IMAGES/common/icon_wrong.png") no-repeat center
      center;
    background-size: contain;
    animation: bounceIn 1s both;
  }
  .item .sentense1,
  .item .sentense2 {
    position: absolute;
    z-index: 2;
  }
  .item .sentense1 textarea,
  .item .sentense2 textarea {
    line-height: 1.15;
    text-align: left;
  }
  .item .spaces {
    position: absolute;
    z-index: 1;
    top: 0;
    left: 0;
  }
  .item .spaces span {
    position: absolute;
    display: grid;
    place-content: center;
    font-size: 12px;
    line-height: 1.2;
  }
</style>
<script>
  var pickMe = function (tar) {
    var gid = tar.attr("gid");
    var item = $(".contents > div.selected .group .item.selected");
    if (item.length > 0) {
      var bp = item.find(".bigPicture");
      var counter = item.find(".counter");
      var dashboard = item.find(".dashboard");
      //counting
      if (
        tar.find("textarea").val() != "" ||
        tar.attr("placeholder") != undefined
      ) {
        bp.find(`span[gid="${gid}"]`).removeClass("selected");
        tar.addClass("selected");
        var content =
          tar.attr("placeholder") != undefined
            ? tar.attr("placeholder")
            : tar.find("textarea").val();
        counter.find(`span[group="${gid}"]`).html(content);
        dashboard.find(`span[group="${gid}"]`).html(tar.attr("oid"));
      } else {
        console.log("輸入");
      }

      //check all filled
      var mustfills = counter.find(".sensors > span");
      var empty = 0;
      mustfills.each(function () {
        if ($(this).html() == "") {
          empty++;
        }
      });
      if (empty == 0) {
        dashboard.addClass("showAnswer");
        bp.addClass("showAnswer");
        rootSoundEffect($right);
        //$(".sideTool > div.btn_check").show();
      } else {
        rootSoundEffect($key);
      }
    }

    $(".sideTool > div.btn_replay").show();
  };
  var chooseMe = function (tar) {
    var text = tar.attr("text");
    $(
      ".contents > div.selected .group .item.selected .dashboard span[group='g3']"
    ).html(text);
    rootSoundEffect($pop);
  };
  var cleanMe = function (tar) {
    tar.html("");
    var group = tar.attr("group");
    $(".contents > div.selected .group .item.selected")
      .find(`.bigPicture span[gid="${group}"]`)
      .removeClass("selected");
    $(".contents > div.selected .group .item.selected .showAnswer").removeClass(
      "showAnswer"
    );
    rootSoundEffect($show);
  };

  var withinResetElem = function () {
    var item = $(".contents > div.selected .group .item.selected");
    var bp = item.find(".bigPicture");
    var counter = item.find(".counter");
    var dashboard = item.find(".dashboard");

    bp.find(".sensors > span").removeClass("selected");
    item.find("textarea").val("");

    counter.find(".sensors > span").html("");
    dashboard.find(".spaces > span").html("");
    dashboard.find(".sensors > span").html("");
  };
</script>
